<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Solo King's Cup - Round 3 Schedule & Voting</title>
  <style>
    :root {
      --bg: #121212;             /* Deep black background */
      --container-bg: #1c1c1c;     /* Slightly lighter black for containers */
      --text: #e0e0e0;            /* Light gray text */
      --border: #333;             /* Dark gray borders */
      --accent: #444;             /* Accent color for hover effects */
      --button-bg: #222;          /* Button background */
      --button-hover: #333;       /* Button hover color */
      --highlight: #fff;          /* Highlight accent (white) */
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Arial', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 30px auto;
      background: var(--container-bg);
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
      animation: fadeIn 1s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .logo-container {
      text-align: center;
      margin-bottom: 30px;
    }
    .logo-container img {
      max-width: 150px;
      filter: drop-shadow(0 4px 10px rgba(0, 0, 0, 0.7));
      transition: transform 0.3s ease;
    }
    .logo-container img:hover {
      transform: scale(1.1);
      width: 200px;
      height: 200px;
    }
    h1 {
      text-align: center;
      font-size: 2.5em;
      padding: 15px 0;
      border-bottom: 2px solid var(--highlight);
      margin-bottom: 30px;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--highlight);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 30px;
    }
    th, td {
      padding: 15px;
      text-align: center;
      border: 1px solid var(--border);
      transition: background 0.3s;
    }
    th {
      background: var(--bg);
      color: var(--highlight);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-size: 1.1em;
    }
    tr:nth-child(even) {
      background: var(--container-bg);
    }
    tr:nth-child(odd) {
      background: var(--bg);
    }
    tr:hover {
      background: var(--accent);
    }
    .vote-btn {
      background: var(--button-bg);
      color: var(--text);
      border: none;
      padding: 8px 15px;
      margin-left: 5px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9em;
      transition: background 0.3s, transform 0.3s;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
    }
    .vote-btn:hover:not(:disabled) {
      background: var(--button-hover);
      transform: scale(1.05);
    }
    .vote-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .note {
      margin-top: 20px;
      padding: 20px;
      background: var(--bg);
      border-left: 5px solid var(--highlight);
      border-radius: 8px;
      font-weight: bold;
      font-size: 1.1em;
      position: relative;
    }
    .note::before {
      content: 'ℹ️';
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.5em;
      color: var(--highlight);
    }
    .results {
      margin-top: 30px;
      padding: 20px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
    }
    .results h2 {
      margin-bottom: 10px;
      color: var(--highlight);
    }
    .results ul {
      list-style: none;
      padding-left: 0;
    }
    .results li {
      margin: 5px 0;
    }
    .footer {
      text-align: center;
      margin-top: 30px;
      font-style: italic;
      font-size: 1em;
      color: var(--text);
    }
    .footer::before {
      content: '⏰';
      margin-right: 10px;
      font-size: 1.2em;
      color: var(--highlight);
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Tournament Logo -->
    <div class="logo-container">
      <img src="./assest/a-modern-and-powerful-typographic-logo-f_tYrn1glgSS2ZiZY6a1ZOHA_yQpj_UO5STS8i6L2ol1l8g-removebg-preview.png" alt="Solo King's Cup Logo">
    </div>
    <h1>Solo King's Cup - Round 3 Schedule & Voting</h1>
    <table>
      <thead>
        <tr>
          <th>Match</th>
          <th>Player 1</th>
          <th>Votes</th>
          <th>Player 2</th>
          <th>Votes</th>
          <th>Time</th>
        </tr>
      </thead>
      <tbody>
        <!-- New Match 1: Previously Match 4 -->
        <tr>
          <td>Match 1</td>
          <td>
            SyedXRuok 
            <button id="voteBtn_SyedXRuok" class="vote-btn" onclick="voteForPlayer('SyedXRuok')">Vote</button>
          </td>
          <td><span id="votes_SyedXRuok">0</span></td>
          <td>
            Bilal 
            <button id="voteBtn_Bilal" class="vote-btn" onclick="voteForPlayer('Bilal')">Vote</button>
          </td>
          <td><span id="votes_Bilal">0</span></td>
          <td>9:00 - 9:17</td>
        </tr>
        <!-- New Match 2: Previously Match 3 -->
        <tr>
          <td>Match 2</td>
          <td>
            X Ruok.77 
            <button id="voteBtn_X_Ruok_77" class="vote-btn" onclick="voteForPlayer('X Ruok.77')">Vote</button>
          </td>
          <td><span id="votes_X_Ruok_77">0</span></td>
          <td>
            Agent FF 
            <button id="voteBtn_Agent_FF" class="vote-btn" onclick="voteForPlayer('Agent FF')">Vote</button>
          </td>
          <td><span id="votes_Agent_FF">0</span></td>
          <td>9:17 - 9:34</td>
        </tr>
        <!-- New Match 3: Previously Match 1 -->
        <tr>
          <td>Match 3</td>
          <td>
            Old Virus 99 
            <button id="voteBtn_Old_Virus_99" class="vote-btn" onclick="voteForPlayer('Old Virus 99')">Vote</button>
          </td>
          <td><span id="votes_Old_Virus_99">0</span></td>
          <td>
            Khizar 
            <button id="voteBtn_Khizar" class="vote-btn" onclick="voteForPlayer('Khizar')">Vote</button>
          </td>
          <td><span id="votes_Khizar">0</span></td>
          <td>9:34 - 9:51</td>
        </tr>
        <!-- New Match 4: Previously Match 2 -->
        <tr>
          <td>Match 4</td>
          <td>
            OmegaStabler 
            <button id="voteBtn_OmegaStabler" class="vote-btn" onclick="voteForPlayer('OmegaStabler')">Vote</button>
          </td>
          <td><span id="votes_OmegaStabler">0</span></td>
          <td>
            Es Qasim 
            <button id="voteBtn_Es_Qasim" class="vote-btn" onclick="voteForPlayer('Es Qasim')">Vote</button>
          </td>
          <td><span id="votes_Es_Qasim">0</span></td>
          <td>9:51 - 10:08</td>
        </tr>
      </tbody>
    </table>
    <!-- Live Vote Counting Session -->
    <div id="results" class="results">
      <!-- Vote counts will be displayed here live -->
    </div>
    <div class="note">
      Agar koi player apna round 3 ka match har jata to wo wild card entry submit karwa ke tour may wapis a sakta, 
      lakin agar koi player is voting session may win kar jata or apna match har bhi jata, phir bhi voting win karny ke wajah se without wild card entry submit karwaye wo tournament may wapis a sakta.
    </div>
    <div class="footer">
      Matches start at 9:00 AM. Har match 17-20 minutes ka hoga.
    </div>
  </div>
  <script>
    // List of players in Round 3.
    var players = ["Old Virus 99", "Khizar", "OmegaStabler", "Es Qasim", "X Ruok.77", "Agent FF", "SyedXRuok", "Bilal"];

    // Helper: Generate a valid element ID for a player by removing special characters.
    function getIdFromPlayer(player) {
      return "votes_" + player.replace(/[^a-zA-Z0-9]/g, "_");
    }
    // Retrieve the vote count from localStorage; return 0 if not set.
    function getVoteCount(player) {
      var key = "vote_" + player;
      var count = localStorage.getItem(key);
      return count ? parseInt(count) : 0;
    }
    // Save the vote count to localStorage.
    function setVoteCount(player, count) {
      var key = "vote_" + player;
      localStorage.setItem(key, count);
    }
    // Update the displayed vote count for a given player in the table.
    function updateVoteDisplay(player) {
      var span = document.getElementById(getIdFromPlayer(player));
      if (span) {
        span.innerText = getVoteCount(player);
      }
    }
    // Disable all vote buttons.
    function disableAllVoteButtons() {
      var buttons = document.querySelectorAll(".vote-btn");
      buttons.forEach(function(btn) {
        btn.disabled = true;
      });
    }
    // Update the live results section.
    function updateResults() {
      var resultsDiv = document.getElementById("results");
      var resultsHTML = "<h2>Live Vote Counting Session</h2><ul>";
      var maxVotes = -1;
      var leader = "";
      players.forEach(function(player) {
        var votes = getVoteCount(player);
        resultsHTML += "<li>" + player + ": " + votes + " vote" + (votes !== 1 ? "s" : "") + "</li>";
        if (votes > maxVotes) {
          maxVotes = votes;
          leader = player;
        }
      });
      resultsHTML += "</ul>";
      if (maxVotes > 0) {
        resultsHTML += "<p><strong>Current Leader: " + leader + " with " + maxVotes + " vote" + (maxVotes !== 1 ? "s" : "") + ".</strong></p>";
      } else {
        resultsHTML += "<p>No votes yet.</p>";
      }
      resultsDiv.innerHTML = resultsHTML;
    }
    // Increase the vote count when a vote button is clicked.
    // Allows only one vote per user (global) using the "voted_once" flag.
    function voteForPlayer(player) {
      if (localStorage.getItem("voted_once")) {
        alert("You have already voted!");
        return;
      }
      var count = getVoteCount(player);
      count++;
      setVoteCount(player, count);
      updateVoteDisplay(player);
      localStorage.setItem("voted_once", "true");
      disableAllVoteButtons();
      updateResults();
    }
    // Listen for storage changes (if using multiple tabs) to update live.
    window.addEventListener("storage", function(e) {
      updateResults();
      players.forEach(function(player) {
        updateVoteDisplay(player);
      });
    });
    // On page load, clear all stored votes so that all counts start at 0.
    window.onload = function() {
      // Clear votes for our players
      players.forEach(function(player) {
        localStorage.removeItem("vote_" + player.replace(/[^a-zA-Z0-9]/g, "_"));
      });
      localStorage.removeItem("voted_once");
      players.forEach(function(player) {
        updateVoteDisplay(player);
      });
      updateResults();
    };
  </script>
</body>
</html>
